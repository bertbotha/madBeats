// SAMPLES FROM HERE
// http://trisamples.com/808-trapstep-pack-vol-1/
// WHAT A LEKKER OKE

(function(){


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// MAINZORS
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

var $audioArray = $('.beat');
var $app = angular.module('madBeats', ["ngTouch"]);

$app.controller('BeatsMachine', function($scope){
	
	this.state = "ready";
	this.hasRepeated = false;
	this.player = "PlayerOne";
	this.audioIndex = 0;

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// WHERE THE MAGIC HAPPENS
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	

	this.registerHit = function () {		

		$audio = $audioArray[this.audioIndex];
		$audio.volume = 0.5;

		// PLAYING (FIRST RUN)
		if(this.state == "playing"){
			$('body').removeClass('up').addClass('down');
		//	$audio.pause();
			$audio.currentTime=0;
			$audio.play();
			this.audioIndex ++;
			if(this.audioIndex > $('.beat').length-1){
				this.audioIndex = 0;
			}

		// READY TO START / IDLE
		} else if(this.state == "ready"){
			this.state="playing";		

		// REPLAY BEAT	
		} else if(this.state == "repeating"){

		}
	}

	this.hitOff = function () {
		if($('body').hasClass('down')){
			$('body').removeClass('down').addClass('up');
		}
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

});

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

})();